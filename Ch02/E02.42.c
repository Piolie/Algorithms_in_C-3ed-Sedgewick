/* ---------------------------------------------------------------------
                              EXERCISE 2.42
------------------------------------------------------------------------
Solve the recurrence
    C_N = a*C_(N/2), for N >= 2 with C_1 = 1
when N is a power of 2.
--------------------------------------------------------------------- */

/* ---------------------------------------------------------------------
N = 2^n

C_N = C_(2^n)
    = a*C_(2^n/2)
    = a*C_(2^(n-1))
    = a*(a*C_(2^(n-2)))
    = a^2*(a*C_(2^(n-3)))
    = ...
    = a^n*(C_(2^(n-n)))
    = a^n*(C_1)
    = a^n

------------------------------------------------------------------------

We would have to apply induction to formally prove it.

--------------------------------------------------------------------- */

#include <stdio.h>
#include <math.h>

unsigned C_N(unsigned a, unsigned N)
{
    if(N == 1)
        return 1;

    return a*C_N(a, N/2);
}

unsigned C_2pown_formula(unsigned a, unsigned n)
{
    return (unsigned)pow(a, n);
}

int main(void)
{
    printf("N\tC_N (rec.)\tC_N (form.)\tEqual?\n");
    printf("----------------------------------------------\n");
    unsigned a = 3;
    unsigned N, n;
    for (N = 1, n = 0; N < 100000; n++, N = (unsigned)(exp2(n)))
    {
        unsigned CN_recurrence = C_N(a, N);
        unsigned CN_formula = C_2pown_formula(a, n);
        int equal = (CN_recurrence == CN_formula);
        printf("%u\t%u\t\t%u\t\t%d\n", N, CN_recurrence, CN_formula, equal);
    }
}

/* ---------------------------------------------------------------------
                                 OUTPUT
------------------------------------------------------------------------
N       C_N (rec.)      C_N (form.)     Equal?
----------------------------------------------
1       1               1               1
2       3               3               1
4       9               9               1
8       27              27              1
16      81              81              1
32      243             243             1
64      729             729             1
128     2187            2187            1
256     6561            6561            1
512     19683           19683           1
1024    59049           59049           1
2048    177147          177147          1
4096    531441          531441          1
8192    1594323         1594323         1
16384   4782969         4782969         1
32768   14348907        14348907        1
65536   43046721        43046721        1

--------------------------------------------------------------------- */
