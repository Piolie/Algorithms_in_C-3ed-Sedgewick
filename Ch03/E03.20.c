/* ---------------------------------------------------------------------
                             EXERCISE 3.20
------------------------------------------------------------------------
Modify Program 3.7 to simulate a situation where the coin turns up heads
with probability p. Run 1000 trials for an experiment with 32 flips with
p = 1/6 to get output that you can compare with Figure 3.2.
--------------------------------------------------------------------- */

#include <stdlib.h>
#include <stdio.h>

int heads(float p)
{
    return rand() < RAND_MAX*p;
}

int main(int argc, char *argv[])
{
    int i, j, cnt;
    int N = atoi(argv[1]), M = atoi(argv[2]);
    float p = atof(argv[3]);
    int *f = malloc((N+1)*sizeof(int));
    for (j = 0; j <= N; j++)
        f[j] = 0;
    for (i = 0; i < M; i++, f[cnt]++)
        for (cnt = 0, j = 0; j <= N; j++)
            if (heads(p))
                cnt++;
    for (j = 0; j <= N; j++)
    {
        printf("%2d ", j);
        for (i = 0; i < f[j]; i+=10)
            printf("*");
        printf("\n");
    }
}

/* ---------------------------------------------------------------------
                                 OUTPUT
------------------------------------------------------------------------
E03.20.exe 32 1000 0.5          E03.20.exe 32 1000 0.1666667
With p = 0.5:                   With p = 0.1666667 (~1/6):

     0                               0 *
     1                               1 ***
     2                               2 ******
     3                               3 ***********
     4                               4 ******************
     5                               5 ******************
     6                               6 ******************
     7                               7 ************
     8 *                             8 *********
     9 *                             9 *****
    10 **                           10 ***
    11 ***                          11 *
    12 *****                        12 *
    13 ********                     13 *
    14 ***********                  14
    15 ************                 15
    16 **************               16
    17 *************                17
    18 *************                18
    19 **********                   19
    20 *******                      20
    21 *****                        21
    22 **                           22
    23 *                            23
    24 *                            24
    25                              25
    26 *                            26
    27                              27
    28                              28
    29                              29
    30                              30
    31                              31
    32                              32

--------------------------------------------------------------------- */
